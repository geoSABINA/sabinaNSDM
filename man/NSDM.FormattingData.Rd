% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/FormatingData.R
\name{NSDM.FormattingData}
\alias{NSDM.FormattingData}
\alias{NSDM.FormatingData}
\title{Formatting input data for nested spatial hierarchical species distribution modeling (NSDM) analysis.}
\usage{
NSDM.FormatingData(
  nsdm_input,
  nPoints = 10000,
  Min.Dist.Global = "resolution",
  Min.Dist.Regional = "resolution",
  Background.method = "random",
  save.output = TRUE
)
}
\arguments{
\item{nsdm_input}{An object of class "nsdm.input" generated using the \code{\link{NSDM.InputData}} function. #@@JMB ver como ponemos el hsbm.input class}

\item{nPoints}{(\emph{optional, default} \code{10000}) \cr
An \code{integer} corresponding to the number of background points used to generate background data if absence/pseudo-absences/background points is not provided at \code{\link{NSDM.InputData}}.}

\item{Min.Dist.Global}{(\emph{optional, default} \code{'resolution'}) \cr
A \code{numeric} corresponding to the minimum distance between species presences points at the global level. If \code{Min.Dist.Global="resolution"}, the minimum distance is calculated based on the resolution of the input \code{\link[terra:rast]{SpatRaster}} at the global scale.}

\item{Min.Dist.Regional}{(\emph{optional, default} \code{'resolution'}) \cr
A \code{numeric} corresponding to the minimum distance between species presences points at the regional level. If \code{Min.Dist.Regional="resolution"}, the minimum distance is calculated based on the resolution of the input \code{\link[terra:rast]{SpatRaster}} at the regional scale.}

\item{Background.method}{(\emph{optional, default} \code{'random'}) \cr
If no background data is provided in the \code{\link{NSDM.InputData}} function, the generation method can be either \code{'random'} or \code{'stratified'}. The "random" option generates (10,000 by default) random background points for both a global and regional scale considering the input raster, respectively for each extension of the input \code{\link[terra:rast]{SpatRaster}}. The "stratified" method is based on a PCA analysis from all environmental covariates, where the two principal component values are divided into quartiles, and multiplied to generate a total stratified variable of 16 categories (stratum). Then, the background points are generated randomly according to the area occupied by each stratum.}

\item{save.output}{(\emph{optional, default} \code{TRUE}) \cr
A \code{logical} value defining whether the outputs should be saved at local.}
}
\value{
An object of class "nsdm.finput" containing formatted input data for the NSDM:
\itemize{
\item \code{Species.Name} The name of the species provided as input.
\item \code{args} A \code{list} containing the arguments used for data formatting, including: \code{nPoints}, \code{Min.Dist.Global}, \code{Min.Dist.Regional}, and \code{Background.method}.
\item \code{SpeciesData.XY.Global} Species presence data at the global level at \code{data.frame} format after applying spatial thinning.
\item \code{SpeciesData.XY.Regional} Species presence data at the regional level at \code{data.frame} format after applying spatial thinning.
\item \code{Background.XY.Global} Background data at the global level at \code{data.frame} format.
\item \code{Background.XY.Regional} Species presence data at the regional level at \code{data.frame} format.
\item \code{IndVar.Global} Independent variables at the global level in \code{\link[terra:rast]{PackedSpatRaster}} format.
\item \code{IndVar.Regional} Independent variables at the regional level in \code{\link[terra:rast]{PackedSpatRaster}} format.
\item \code{Scenarios} A \code{list} containing future scenarios in \code{\link[terra:rast]{PackedSpatRaster}} format.
\item \code{Summary} Summary of formated input data in \code{data.frame} format.
}
}
\description{
Format input data and background data (if necessary) for usage in \bold{NSDM}.
}
\details{
This function formats the input data for NSDM, including generating background points, cleaning and thinning presence data, and saving the results to local if specified. If \code{save.output=TRUE}, outputs (i.e., species occurrences and background points after applying spatial thinning, at both global and regional level, are stored out of R in the \emph{Results/} folder created in the current working directory:
\itemize{
\item the \emph{Results/Global/SpeciesXY/} folder, containing the occurrences species (x and y coordinates) at the global scale after applying spatial thinning, named with the \code{resp.name} argument.
\item the \emph{Results/Global/Background/} folder, containing the background points (x and y coordinates) at the global scale.
\item the \emph{Results/Regional/SpeciesXY/} folder, containing the occurrences species (x and y coordinates) at the regional scale, named with the \code{resp.name} argument.
\item the \emph{Results/Regional/Background/} folder, containing the background points (x and y coordinates) at the global scale.
}
}
\examples{
# Load the required packages  #@@JMB en el ejemplo hay que poner también el NSDM.InputData() para tener myInputData? Ver cómo hacen otros
library(terra)
library(ecospat)

# Format the input data
myFormatedData <- NSDM.FormatingData(myInputData,
				nPoints=1000)

}
